<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>RS3 - 1 - Deriving Land Surface Temperature from MODIS</title>
<meta name="identifier" content="g2be989699abf7a5f4b0e961c69a556c2"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>
<p><span>Land surface temperature can be extracted from derived products, such as the MODIS Terra and Aqua satellite products (Wan 2006), or estimated directly from measurements in the thermal band. We will explore both options using the city of New Haven, Connecticut, USA, as the region of interest (see Figure). We will start with the MODIS LST.</span></p>
<p><span>We start by loading the feature collection, which, being a census tract-level aggregation, we dissolve to get the overall boundary using the </span><span>union</span><span> operation. The </span><span>FeatureCollection</span><span> is added to the map for demonstration:</span></p>
<pre>// Load feature collection of New Haven's census tracts from user assets.&nbsp;<br>var regionInt = ee.FeatureCollection("users/sounny/TC_NewHaven");<br><br>// Get dissolved feature collection using an error margin of 50 meters.<br>var regionInt = regionInt.union(50);<br><br>// Set map center and zoom level (Zoom level varies from 1 to 20).<br>Map.setCenter(-72.9, 41.3, 12);<br><br>// Add layer to map.<br>Map.addLayer(regionInt, {}, 'New Haven boundary');</pre>
<p><span><img src="$IMS-CC-FILEBASE$/Uploaded%20Media/Screenshot%202023-11-09%20at%2010.56.01%E2%80%AFAM.png" alt="Screenshot 2023-11-09 at 10.56.01 AM.png" data-api-endpoint="https://ufl.instructure.com/api/v1/courses/489224/files/82798576" data-api-returntype="File" loading="lazy"></span></p>
<p><span>Next we load in the MODIS MYD11A2 version 6 product, which provides eight-day composites of LST from the Aqua satellite. This corresponds to an equatorial crossing time of roughly 1:30 p.m. during daytime and 1:30 a.m. at night. In contrast, the MODIS sensor onboard the Terra platform (MOD11A2 version 6) has an overpass of roughly 10:30 a.m. and 10:30 p.m.&nbsp;</span></p>
<table>
<tbody>
<tr>
<td>
<pre><span>// Load MODIS image collection from the Earth Engine data catalog.</span><span><br></span><strong>var</strong><span> modisLst = </span><span>ee</span><span>.</span><span>ImageCollection</span><span>(</span><span>'MODIS/006/MYD11A2'</span><span>);</span><span><br></span><span><br></span><span>// Select the band of interest (in this case: Daytime LST).</span><span><br></span><strong>var</strong><span> landSurfTemperature = modisLst.</span><span>select</span><span>(</span><span>'LST_Day_1km'</span><span>);</span></pre>
</td>
</tr>
</tbody>
</table>
<p><span>&nbsp;</span></p>
<p><span>We want to focus on only summertime SUHI, so we will create a five-year summer composite of LST using a day-of-year filter assembling images from June 1 (day 152) to August 31 (day 243) in each year:</span></p>
<table>
<tbody>
<tr>
<td>
<pre><span>// Create a summer filter.</span><span><br></span><strong>var</strong><span> sumFilter = </span><span>ee</span><span>.</span><span>Filter.dayOfYear</span><span>(</span><span>152</span><span>, </span><span>243</span><span>);</span><span><br></span><span><br></span><span>// Filter the date range of interest using a date filter.</span><span><br></span><strong>var</strong><span> lstDateInt = landSurfTemperature</span><span><br></span><span>&nbsp; &nbsp; .</span><span>filterDate</span><span>(</span><span>'2014-01-01'</span><span>, </span><span>'2019-01-01'</span><span>).</span><span>filter</span><span>(sumFilter);</span><span><br></span><span><br></span><span>// Take pixel-wise mean of all the images in the collection.</span><span><br></span><strong>var</strong><span> lstMean = lstDateInt.</span><span>mean</span><span>();</span></pre>
</td>
</tr>
</tbody>
</table>
<p><span>&nbsp;</span></p>
<p><span>We now convert this image into LST in degrees Celsius and mask out all the water pixels (the high specific heat capacity of water would affect LST, and we are focused on land pixels). For the water mask, we use the Global Surface Water dataset (Pekel et al. 2016); to convert the pixel values, we use the scaling factor for the band from the data provider and then subtract by 273.15 to convert from Kelvin to degrees Celsius. The scaling factor can be found in the Earth Engine data summary metadata page.</span></p>
<p><span><img src="$IMS-CC-FILEBASE$/Uploaded%20Media/Screenshot%202023-11-09%20at%2010.59.30%E2%80%AFAM.png" alt="Screenshot 2023-11-09 at 10.59.30 AM.png" data-api-endpoint="https://ufl.instructure.com/api/v1/courses/489224/files/82798627" data-api-returntype="File" loading="lazy"></span></p>
<p><span>Finally, we clip the image using the city boundary and add the layer to the map.</span></p>
<table>
<tbody>
<tr>
<td>
<pre><span>// Multiply each pixel by scaling factor to get the LST values.</span><span><br></span><strong>var</strong><span> lstFinal = lstMean.</span><span>multiply</span><span>(</span><span>0.02</span><span>);</span><span><br></span><span><br></span><span>// Generate a water mask.</span><span><br></span><strong>var</strong><span> water = </span><span>ee</span><span>.</span><span>Image</span><span>(</span><span>'JRC/GSW1_0/GlobalSurfaceWater'</span><span>).</span><span>select</span><span>(</span><span><br></span><span>&nbsp; &nbsp; </span><span>'occurrence'</span><span>);</span><span><br></span><strong>var</strong><span> notWater = water.</span><span>mask</span><span>().</span><span>not</span><span>();</span><span><br></span><span><br></span><span>// Clip data to region of interest, convert to degree Celsius, and mask water pixels.</span><span><br></span><strong>var</strong><span> lstNewHaven = lstFinal.</span><span>clip</span><span>(regionInt).</span><span>subtract</span><span>(</span><span>273.15</span><span>)</span><span><br></span><span>&nbsp; &nbsp; .</span><span>updateMask</span><span>(notWater);</span><span><br></span><span><br></span><span>// Add layer to map.</span><span><br></span><span>Map</span><span>.</span><span>addLayer</span><span>(lstNewHaven, {</span><span><br></span><span>&nbsp; &nbsp; &nbsp; &nbsp; palette: [</span><span>'blue'</span><span>, </span><span>'white'</span><span>, </span><span>'red'</span><span>],</span><span><br></span><span>&nbsp; &nbsp; &nbsp; &nbsp; min: </span><span>25</span><span>,</span><span><br></span><span>&nbsp; &nbsp; &nbsp; &nbsp; max: </span><span>38</span><span><br></span><span>&nbsp; &nbsp; },</span><span><br></span><span>&nbsp; &nbsp; </span><span>'LST_MODIS'</span><span>);</span></pre>
</td>
</tr>
</tbody>
</table>
<p><img src="$IMS-CC-FILEBASE$/Uploaded%20Media/Screenshot%202023-11-09%20at%2011.00.21%E2%80%AFAM.png" alt="Screenshot 2023-11-09 at 11.00.21 AM.png" data-api-endpoint="https://ufl.instructure.com/api/v1/courses/489224/files/82798646" data-api-returntype="File" loading="lazy"></p>
</body>
</html>