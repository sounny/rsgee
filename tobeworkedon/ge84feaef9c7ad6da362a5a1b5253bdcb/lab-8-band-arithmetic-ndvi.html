<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Assignment: Lab 8 - Band Arithmetic - NDVI</title>
</head>
<body>
<p><em><strong><a class="ig-title title item_link" title="Lecture - Fall 2023 - Lab 8" href="$CANVAS_COURSE_REFERENCE$/modules/items/gccb9437b953d3ae78ab2ec30d118cf46">Lecture - Fall 2023 - Lab 8</a></strong></em></p>
<p><em><strong><a class="ig-title title item_link" title="Lecture - Spring 2023 - Lab 8 - NDVIs, Spectral Indices, Band Arithmetic, Raster Calculators" href="$CANVAS_COURSE_REFERENCE$/modules/items/ga752802eaa88c3405e0f981b77d87877">Lecture - Spring 2023 - Lab 8 - NDVIs, Spectral Indices, Band Arithmetic, Raster Calculators</a></strong></em></p>
<p><em><strong>Objective: Earth Engine is capable of computing a variety of indices with the use of band arithmetic. This involves the combination of two or more bands from an image, which can be done by adding, subtracting, multiplying, or dividing. In this Lab, we will demonstrate the manual process and then provide faster methods to carry out band arithmetic in Earth Engine.</strong></em></p>
<ol style="list-style-type: decimal;">
<li><strong>Manual Method</strong></li>
<li>As you remember, NDVI is calculated by doing arithmetic on bands, subtracting corresponding pixels, and dividing them by their sum using the following formula.&nbsp;</li>
<li><img src="$IMS-CC-FILEBASE$/Uploaded%20Media/ndvi-formula.png" alt="NDVI Formula" width="452" height="95" data-api-endpoint="https://ufl.instructure.com/api/v1/courses/489224/files/79934730" data-api-returntype="File" loading="lazy"></li>
<li>To compute the NDVI, we will introduce Earth Engine’s implementation of band arithmetic. Cloud-based band arithmetic is one of the most powerful aspects of Earth Engine because the platform’s computers are optimized for this type of heavy processing. Arithmetic on bands can be done even at the planetary scale very quickly—an idea that was out of reach before the advent of cloud-based remote sensing. Earth Engine automatically partitions calculations across many computers as needed and assembles the answer for display.&nbsp;</li>
<li>Copy and paste the following code into Earth Engine.&nbsp;</li>
<li>
<pre>/////<br>// Band Arithmetic<br>/////<br><br>// Calculate NDVI using Sentinel 2<br><br>// Import and filter imagery by location and date.<br>var sfoPoint = ee.Geometry.Point(-122.3774, 37.6194); &nbsp; //long lat of San Fran<br>var sfoImage = ee.ImageCollection('COPERNICUS/S2')<br>&nbsp; &nbsp; .filterBounds(sfoPoint)<br>&nbsp; &nbsp; .filterDate('2020-02-01', '2020-04-01')<br>&nbsp; &nbsp; .first();<br><br>// Display the image as a false color composite.<br>Map.centerObject(sfoImage, 11);<br>Map.addLayer(sfoImage, {<br>&nbsp; &nbsp; bands: ['B8', 'B4', 'B3'],<br>&nbsp; &nbsp; min: 0,<br>&nbsp; &nbsp; max: 2000<br>}, 'False color');</pre>
</li>
<li>The above code will create a false color image, as we have done in previous labs.&nbsp; Now we will look at using band arithmetic to create the NDVI. The simplest mathematical operations in Earth Engine are the add, subtract, multiply, and divide methods. Let’s select the near-infrared and red bands and use these operations to calculate NDVI for our image.</li>
<li>
<pre><br>// Extract the near infrared and red bands.<br>var nir = sfoImage.select('B8');<br>var red = sfoImage.select('B4');<br><br>// Calculate the numerator and the denominator using subtraction and addition respectively.<br>var numerator = nir.subtract(red);<br>var denominator = nir.add(red);<br><br>// Now calculate NDVI.<br>var ndvi = numerator.divide(denominator);<br><br>// Add the layer to our map with a palette.<br>var vegPalette = ['red', 'white', 'green'];<br>Map.addLayer(ndvi, {<br>&nbsp; &nbsp; min: -1,<br>&nbsp; &nbsp; max: 1,<br>&nbsp; &nbsp; palette: vegPalette<br>}, 'NDVI Manual');</pre>
</li>
<li>
<p>&nbsp;</p>
<p><span>Examine the resulting index, using the </span><strong>Inspector </strong><span>to pick out pixel values in areas of vegetation and non-vegetation if desired. &nbsp;&nbsp;NDVI was calculated using Sentinel-2. Remember that outputs for NDVI vary between −1 and 1. High amounts of green vegetation have values around 0.8–0.9. Absence of green leaves gives values near 0, and water gives values near −1.&nbsp;</span></p>
</li>
<li><em><strong>Question 1: Explore the image.&nbsp; Find a location in the image that contrasts healthy vegetation and non-vegetation.&nbsp; Screenshot that area and write a caption for the image explaining the differences in NDVI Values. (10 Points)</strong></em></li>
<li>
<p><span>Using these simple arithmetic tools, you can build almost any index, or develop and visualize your own. Earth Engine lets you quickly and easily calculate and display the index across a large area.&nbsp;</span></p>
</li>
<li>
<h5><strong><i>Single-Operation Computation of Normalized Difference for NDVI</i></strong></h5>
</li>
<li>
<p><span>Normalized differences like NDVI are so common in remote sensing that Earth Engine provides the ability to do that particular sequence of subtraction, addition, and division in a single step, using the normalizedDifference method. This method takes an input image, along with bands you specify, and creates a normalized difference between those two bands. The NDVI computation previously created with band arithmetic can be replaced with one line of code:</span></p>
</li>
<li>
<pre><span>// Now use the built-in normalizedDifference function to achieve the same outcome.<br>var ndviND = sfoImage.normalizedDifference(['B8', 'B4']);<br>Map.addLayer(ndviND, {<br>&nbsp; &nbsp; min: -1,<br>&nbsp; &nbsp; max: 1,<br>&nbsp; &nbsp; palette: vegPalette<br>}, 'NDVI normalizedDiff');</span></pre>
</li>
<li>Note that the order in which you provide the two bands to normalizedDifference is important. We use B8, the near-infrared band, as the first parameter, and the red band B4 as the second. If your two computations of NDVI do not look identical when drawn to the screen, check to ensure that the order you have for the NIR and red bands is correct.</li>
<li>
<h5><strong><i>Using Normalized Difference for NDWI</i></strong></h5>
</li>
<li>
<p>As mentioned, the normalized difference approach is used for many different indices. Let’s apply the same normalizedDifference method to another index.</p>
</li>
<li>
<p>The Normalized Difference Water Index (NDWI) was developed by Gao (1996) as an index of vegetation water content. The index is sensitive to changes in the liquid content of vegetation canopies. This means that the index can be used, for example, to detect vegetation experiencing drought conditions or differentiate crop irrigation levels. In dry areas, crops that are irrigated can be differentiated from natural vegetation. It is also sometimes called the Normalized Difference Moisture Index (NDMI).</p>
</li>
<li>
<p>NDWI is formulated as follows:</p>
</li>
<li>
<p><img src="$IMS-CC-FILEBASE$/Uploaded%20Media/Screenshot%202023-02-24%20at%203.30.08%20AM.png" alt="NDWI formula
" data-api-endpoint="https://ufl.instructure.com/api/v1/courses/489224/files/79934731" data-api-returntype="File" loading="lazy"></p>
</li>
<li>
<pre><span>// Use normalizedDifference to calculate NDWI</span><span><br></span><strong>var</strong><span> ndwi = sfoImage.</span><span>normalizedDifference</span><span>([</span><span>'B8'</span><span>, </span><span>'B11'</span><span>]);</span><span><br></span><strong>var</strong><span> waterPalette = [</span><span>'white'</span><span>, </span><span>'blue'</span><span>];</span><span><br></span><span>Map</span><span>.</span><span>addLayer</span><span>(ndwi, {</span><span><br></span><span>&nbsp; &nbsp; min: </span><span>-0.5</span><span>,</span><span><br></span><span>&nbsp; &nbsp; max: </span><span>1</span><span>,</span><span><br></span><span>&nbsp; &nbsp; palette: waterPalette</span><span><br></span><span>}, </span><span>'NDWI'</span><span>);</span></pre>
</li>
<li><em><strong>Troubleshooting help: Here is a link to the Code up to this point: <a href="https://code.earthengine.google.com/7671c73b0eab8a2cf87be949236667ee" target="_blank">https://code.earthengine.google.com/7671c73b0eab8a2cf87be949236667ee</a></strong></em></li>
<li><em><strong>Question 2: Look at the same area that you looked at in Question 1.&nbsp; Look at it now with NDWI.&nbsp; What does this index tell you about the previous interpretation you had?&nbsp; Include a screenshot. (10 Points)</strong></em></li>
<li>Read the following article on Medium. &nbsp;<a href="https://medium.com/regen-network/remote-sensing-indices-389153e3d947" target="_blank">https://medium.com/regen-network/remote-sensing-indices-389153e3d947</a>
</li>
<li>Read also this article from Medium. <a href="https://medium.com/spatial-data-science/4-useful-remote-sensing-indices-like-ndvi-2504383c6e54" target="_blank">https://medium.com/spatial-data-science/4-useful-remote-sensing-indices-like-ndvi-2504383c6e54</a>&nbsp;</li>
<li><em><strong>Question 3: Select a different index, from the article in Medium or another one you can find.&nbsp; &nbsp;Using either the normalizedDiffernce method or the manual method, write code that calculates the index and adds the layer to Earth Engine with a good palette for visualization.&nbsp; Turn in a screenshot of your AOI from Questions 1 and 2 with the new index.&nbsp; Interpret what this new index tells you about your site.&nbsp; Include screenshots. (20 points)</strong></em></li>
<li>
<em><strong>Question 4: Add your URL for your code to your document with your screenshots and submit it on canvas. (10 points)</strong></em><br><br>&nbsp;</li>
</ol>
</body>
</html>